# TreeMap
### 1.初始TreeMap
对于某些需要排序或者统计某一分量下的数据的时候HashMap做的比较差,此时TreeMap就出现了。会根据Key的自然顺序或者创建时提供的Comparator接口进行排序。

### 2.关注特征：
#### 2.1是否允许为空?
答：key不允许为空,value允许为空
#### 2.2是否允许存储重复元素?
答：key重复覆盖,但值可以重复。
#### 2.3是否有序?
答：按照key的自然顺序或者接口定义的顺序进行排序
#### 2.4是否允许线程安全?
答：非线程安全

### 3.关注源码
#### 3.1 红黑树概念
[红黑树](https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91)性质：
- 1.结点是红色或黑色。
- 2.根是黑色。
- 3.叶子是红色。
- 4.每个红色结点必须有2个黑色结点。意味着两个红色的结点是不可能相邻的。
- 5.任一结点到其每个叶子的所有简单路径中所包含的黑色结点的个数是一样的。即：最长的路径都有相同的黑色结点。
- 1,2,3,4,5确保了红黑树的关键特性:从根到叶子的路径中,最长路径不多于最短路径的两倍长,所以大致是平衡的。

#### 3.2 关注结点

```
static final class Entry<K,V> implements Map.Entry<K,V> {
        K key;
        V value;
        //左结点
        Entry<K,V> left;
        //右结点
        Entry<K,V> right;
        //父结点
        Entry<K,V> parent;
        //颜色只有两种,boolean类型的值
        boolean color = BLACK; //将结点设置为黑色结点
```
其余则就是旋转和插入还有其他的,这里就不分析了。最主要的是记住底层数据结构以及要先实现开发者内心的排序规则的时候必须实现Comparator接口。
